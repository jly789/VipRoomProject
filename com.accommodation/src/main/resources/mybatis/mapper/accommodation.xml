<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-/mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="vip.com.accommodation.mapper.accommodation.AccommodationMapper">




    <select id="maxNum" resultType="int">
        select ifnull(max(accommodationId),0) from accommodation
    </select>


    <insert id="accommodationInsert" parameterType="vip.com.accommodation.mapper.accommodation.AccommodationMapper">

        insert into accommodation(accommodationId,accommodationName,accommodationDistrict,accommodationCity,accommodationAddress,
                                  accommodationCategory,accommodationInformation,accommodationCreateDate)
        values (#{accommodationId},#{accommodationName},#{accommodationDistrict},#{accommodationCity},#{accommodationAddress}
               ,#{accommodationCategory},#{accommodationInformation},sysdate())


    </insert>



    <select id="accommodationFindList" resultType="vip.com.accommodation.dto.accommodation.AccommodationFindDto">

        select distinct * from accommodation





    </select>

    <select id="accommodationMainList" resultType="vip.com.accommodation.dto.accommodation.AccommodationMainListDto">

        select  a.accommodationId,a.accommodationName ,b.accommodationImage,
                a.accommodationCategory  from  accommodation a
                                                   left join  accommodationImg b
                                                              on a.accommodationId= b.accommodationId
                                                   left join room c on c.accommodationId = b.accommodationId
        group by a.accommodationName,a.accommodationId,b.accommodationImage





    </select>


    <select id="accommodationMainListSearchCity" parameterType="vip.com.accommodation.dto.accommodation.AccommodationMainListDto" resultType="vip.com.accommodation.dto.accommodation.AccommodationMainListDto">

        select  a.accommodationId,a.accommodationName ,b.accommodationImage,
                a.accommodationCategory  from  accommodation a
                                                   left join  accommodationImg b
                                                              on a.accommodationId= b.accommodationId
                                                   left join room c on c.accommodationId = b.accommodationId

        where a.accommodationDistrict= #{accommodationDistrict} and a.accommodationCity=#{accommodationCity}
        group by a.accommodationName,a.accommodationId,b.accommodationImage





    </select>


    <select id="accommodationDetailList" parameterType="int" resultType="vip.com.accommodation.dto.accommodation.AccommodationMainListDto">

        select distinct *  from  accommodation
                                     left join  accommodationImg
                                                on accommodation.accommodationId= accommodationImg.accommodationId

        where accommodation.accommodationId= #{accommodationId}






    </select>









<!--    <select id="idCheck" parameterType="String" resultType="int">-->

<!--    select count(*) from member-->
<!--    where userId =#{userId}-->

<!--    </select>-->

<!--    <select id="idSearch" parameterType="vip.com.accommodation.dto.member.MemberSearchDto" resultType="String">-->

<!--    select userId from member-->
<!--    where userName=#{userName} and email=#{email}-->


<!--    </select>-->

<!--    <select id="pwdSearch" parameterType="vip.com.accommodation.dto.member.MemberSearchDto" resultType="String">-->

<!--        select pwd from member-->
<!--        where userId=#{userId} and email=#{email}-->


<!--    </select>-->

<!--    <select id="mypage" parameterType="String" resultType="vip.com.accommodation.dto.member.MemberFindDto">-->

<!--    select * from member-->
<!--    where userId = #{userId}-->



<!--    </select>-->

<!--    <update id="mypageUpdate" parameterType="vip.com.accommodation.dto.member.MemberUpdateDto">-->

<!--       update member-->
<!--       set  pwd =#{pwd},userName =#{userName},nickName =#{nickName},birth=#{birth}, tel =#{tel},postcode =#{postcode},address =#{address},-->
<!--           detailAddress =#{detailAddress},extraAddress =#{extraAddress},email =#{email}-->

<!--       where userId = #{userId}-->




<!--    </update>-->



<!--<select id="deleteLoginCheck" parameterType="vip.com.accommodation.dto.member.MemberDeleteDto" resultType="int">-->

<!--    select count(*) from member-->
<!--    where userId = #{userId} and pwd = #{pwd}-->

<!--</select>-->


<!--    <delete id="mypageDelete" parameterType="vip.com.accommodation.dto.member.MemberDeleteDto">-->

<!--    delete from member-->
<!--    where userId =#{userId} and pwd = #{pwd}-->

<!--    </delete>-->


</mapper>
